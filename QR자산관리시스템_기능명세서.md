# 🏢 QR 자산관리 시스템 - 기능 명세서

## 📋 프로젝트 개요

**QR 자산관리 시스템**은 QR 코드를 활용한 기업용 자산 관리 솔루션으로, 직원별 장비 할당과 추적을 효율적으로 관리할 수 있는 웹 애플리케이션입니다.

### 🛠 기술 스택
- **Frontend**: Nuxt.js 3 + Vue 3 + TypeScript + Tailwind CSS
- **Backend**: Node.js + Express.js + JWT 인증
- **Database**: Supabase (PostgreSQL)
- **Deployment**: PM2 + Nginx + SSL (Let's Encrypt)
- **Domain**: https://invenone.it.kr

### 📁 프로젝트 구조
```
qr-asset-management/
├── backend/                 # 백엔드 (Node.js + Express)
│   ├── config/             # Supabase 설정
│   ├── middleware/         # 인증 미들웨어
│   ├── routes/            # API 라우트
│   │   ├── auth.js        # 인증 관련
│   │   ├── dashboard.js   # 대시보드 통계
│   │   ├── devices.js     # 장비 관리
│   │   ├── employees.js   # 직원 관리
│   │   ├── permissions.js # 권한 관리
│   │   ├── qr.js         # QR 코드
│   │   └── users.js      # 사용자 관리
│   └── index.js           # 메인 서버 파일 (포트 4000)
├── frontend/              # 프론트엔드 (Nuxt.js 3)
│   ├── components/        # Vue 컴포넌트
│   │   ├── BaseButton.vue
│   │   ├── DeviceModal.vue
│   │   ├── EmployeeModal.vue
│   │   ├── Header.vue
│   │   └── Sidebar.vue
│   ├── pages/            # 페이지
│   │   ├── dashboard.vue
│   │   ├── devices/
│   │   ├── employees/
│   │   ├── login.vue
│   │   ├── qr-generator.vue
│   │   └── qr-scanner.vue
│   ├── stores/           # 상태 관리
│   └── app.vue           # 메인 앱 컴포넌트
└── 배포 스크립트들
```

---

## 🔐 인증 및 사용자 관리

### 1. **사용자 인증 시스템**
- **회원가입/로그인**: 이메일 기반 계정 생성 및 인증
- **JWT 토큰**: 안전한 세션 관리 (24시간 유효)
- **비밀번호 암호화**: bcryptjs를 사용한 해시 처리
- **인증 미들웨어**: 보호된 페이지 접근 제어
- **자동 리다이렉트**: 로그인 후 원래 요청 페이지로 이동

### 2. **권한 관리 시스템**
- **역할 기반 접근 제어 (RBAC)**:
  - **Admin**: 모든 데이터 접근 및 관리
  - **Manager**: 자신이 등록한 직원/장비만 관리
- **동적 권한 검증**: 각 API 요청 시 실시간 권한 확인
- **리소스 단위 권한**: 직원, 장비, 사용자별 세분화된 접근 제어
- **권한 체크 함수**: `check_user_permission` RPC 함수 활용

---

## 👥 직원 관리

### 3. **직원 정보 관리**
#### 기본 정보
- **필수 정보**: 이름, 부서, 직급, 회사명
- **추가 정보**: 이메일 주소
- **상태 관리**: 활성/퇴사 상태 추적
- **생성일**: 등록일시 자동 기록

#### 뷰 옵션 (2025-01-27 업데이트)
- **기본 뷰**: 리스트형 (테이블 형태)
- **카드형 뷰**: 
  - 5개/7개/10개 열 밀도 선택 가능
  - 반응형 디자인으로 화면 크기별 자동 조정
- **뷰 전환**: 카드형 ↔ 리스트형 원터치 전환
- **설정 저장**: 사용자 뷰 선호도 localStorage 저장

#### 검색 및 필터링
- **실시간 검색**: 이름, 부서, 직급, 이메일로 검색
- **부서별 필터**: 드롭다운으로 부서 선택
- **클라이언트 사이드 필터링**: 빠른 응답속도

### 4. **직원 상세 정보**
- **개별 직원 페이지**: `/employees/[id]`
- **할당된 장비 목록**: 해당 직원에게 배정된 모든 장비 표시
- **직원 정보 수정**: EmployeeModal을 통한 실시간 정보 업데이트
- **장비 수 표시**: 할당된 장비 개수 실시간 표시

---

## 💻 장비 관리

### 5. **장비 정보 관리**
#### 기본 정보
- **자산번호**: 타입별 자동 PREFIX 생성
  - 노트북: `AS-NB-xxx`
  - 데스크탑: `AS-PC-xxx`
  - 모니터: `AS-MT-xxx`
  - 프린터/기타: `AS-ETC-xxx`
- **제조사/모델**: 제조사명, 모델명
- **시리얼번호**: 고유 식별번호

#### 상세 사양 정보
- **CPU**: 프로세서 정보
- **메모리**: 다중 메모리 모듈 지원
- **저장장치**: HDD/SSD 혼합 구성 지원
- **그래픽카드**: GPU 정보
- **운영체제**: OS 정보
- **모니터 크기**: 노트북 화면 크기

#### 관리 정보
- **담당자**: 직원 할당/해제
- **용도**: 자유 입력 (업무용, 개발용 등)
- **지급일자**: 장비 지급일
- **조사일자**: 자동 생성

### 6. **장비 목록 뷰 시스템** (2025-01-27 업데이트)
#### 뷰 모드
- **카드형 뷰**: 시각적으로 보기 좋은 카드 형태
- **리스트형 뷰**: 상세 정보를 한눈에 볼 수 있는 테이블 형태

#### 카드 밀도 옵션
- **5개/행**: 기본 설정, 상세 정보 충분히 표시
- **7개/행**: 중간 밀도, 많은 정보를 한 화면에
- **10개/행**: 고밀도, 최대한 많은 항목 표시

#### 반응형 디자인
- **1200px 이하**: 밀도 자동 조정
- **900px 이하**: 3열로 자동 변경
- **768px 이하**: 2열로 조정
- **480px 이하**: 1열로 변경

#### 필터링 및 검색
- **할당 상태**: 할당됨/미할당 필터
- **장비 타입**: 노트북, 데스크탑, 모니터, 프린터, 기타
- **제조사별**: 제조사 드롭다운 필터
- **검색**: 자산번호, 제조사, 모델명 실시간 검색

### 7. **고급 장비 사양 관리** (2025-01-27 업데이트)
#### 다중 메모리 구성
- **여러 메모리 모듈**: 각각 개별 관리
- **용량 단위**: MB/GB/TB 선택
- **업/다운 버튼**: 직관적인 용량 조정 UI
- **동적 추가/삭제**: 필요에 따라 메모리 슬롯 관리

#### 다중 저장장치 구성
- **HDD/SSD 구분**: 타입별 구분 관리
- **혼합 구성**: HDD + SSD 조합 지원
- **용량 관리**: 각 저장장치별 개별 용량 설정
- **문자열 포맷**: "SSD 512GB / HDD 1TB" 형태로 저장

### 8. **장비 할당 시스템**
- **직원별 할당**: 드롭다운으로 담당자 선택
- **미할당 관리**: 담당자 없는 장비 추적
- **회사명 연동**: 담당자의 회사 정보 자동 표시
- **할당 이력**: 장비 할당 변경 내역 추적

### 9. **폐기 장비 관리** (2025-01-27 업데이트)
- **폐기 상태**: 용도를 '폐기'로 설정하여 관리
- **별도 모달**: 폐기된 장비만 모아서 보기
- **메인 리스트 제외**: 일반 장비 목록에서 숨김
- **통계 반영**: 대시보드에서 폐기 장비 수 별도 표시

---

## 📊 대시보드 및 통계

### 10. **실시간 대시보드**
#### 핵심 지표
- **총 장비 수**: 폐기된 장비 제외
- **총 직원 수**: 등록된 전체 직원
- **할당된 장비**: 담당자가 있는 장비
- **미할당 장비**: 담당자가 없는 장비
- **이번 달 신규**: 이번 달 등록된 항목
- **폐기된 장비**: 폐기 처리된 장비 (클릭 시 상세 모달)

#### 장비 타입별 통계
- **노트북**: device_type = '노트북'
- **데스크탑**: device_type = '데스크탑'
- **모니터**: device_type = '모니터'
- **기타**: 프린터 및 기타 장비

#### 시각적 표시
- **진행률 바**: 할당률 시각화
- **컬러 코딩**: 상태별 색상 구분
- **애니메이션**: 부드러운 카운트업 효과

### 11. **권한 기반 데이터 표시**
- **Admin 권한**: 전체 시스템 통계 조회
- **Manager 권한**: 자신이 등록한 직원/장비만 표시
- **실시간 권한 체크**: 각 API 호출 시 권한 검증
- **데이터 필터링**: 백엔드에서 권한에 따른 데이터 필터링

---

## 🔍 QR 코드 시스템

### 12. **QR 코드 생성기**
#### 생성 기능
- **장비별 QR 생성**: 각 장비의 고유 QR 코드 생성
- **URL 기반**: 장비 상세 페이지 URL 인코딩
- **다양한 크기**: 128x128, 256x256, 512x512 픽셀
- **고품질 출력**: PNG 형식 고해상도 이미지

#### 사용 방법
- **장비 선택**: 드롭다운에서 장비 선택
- **크기 선택**: 원하는 QR 코드 크기 선택
- **즉시 생성**: 실시간 QR 코드 미리보기
- **다운로드**: 버튼 클릭으로 즉시 파일 다운로드

### 13. **QR 코드 스캐너**
#### 스캔 기능
- **실시간 스캔**: 웹캠을 통한 실시간 QR 인식
- **자동 감지**: QR 코드 감지 시 자동 처리
- **오류 처리**: 잘못된 QR 코드나 URL 감지 및 안내
- **모바일 최적화**: 스마트폰 카메라로도 원활한 스캔

#### 자동 리다이렉트
- **인증 확인**: 로그인 상태 체크
- **URL 파싱**: QR 코드에서 장비 ID 추출
- **페이지 이동**: 해당 장비 상세 페이지로 자동 이동
- **세션 저장**: 비로그인 시 목적지 URL 저장

### 14. **QR 링크 시스템**
#### 직접 접근
- **URL 구조**: `/devices/[asset_number]` 형태
- **SEO 친화적**: 의미있는 URL 구조
- **북마크 가능**: 브라우저 북마크 지원

#### 인증 처리
- **로그인 체크**: 페이지 접근 시 인증 상태 확인
- **리다이렉트**: 비로그인 시 로그인 페이지로 이동
- **세션 복원**: 로그인 후 원래 요청 페이지로 자동 이동
- **sessionStorage 활용**: 임시 URL 저장

---

## 📁 데이터 관리

### 15. **Excel 가져오기/내보내기**
#### 가져오기 기능
- **지원 형식**: CSV, XLS, XLSX
- **템플릿 제공**: 정확한 형식의 샘플 파일 다운로드
- **일괄 등록**: 여러 장비 정보 한번에 등록
- **UPSERT 동작**: 기존 자산번호 있으면 업데이트, 없으면 신규 생성

#### 오류 처리
- **데이터 검증**: 필수 필드 및 형식 검사
- **오류 보고**: 실패한 행과 이유 상세 안내
- **부분 성공**: 성공/실패 건수 개별 표시
- **롤백 없음**: 성공한 데이터는 유지

#### 내보내기 기능
- **현재 목록**: 필터링된 장비 목록 내보내기
- **전체 필드**: 모든 장비 정보 포함
- **Excel 형식**: .xlsx 파일로 다운로드
- **한글 인코딩**: UTF-8 BOM으로 한글 지원

### 16. **데이터 검증 시스템**
#### 필수 필드 검증
- **자산번호**: 중복 검사 및 형식 확인
- **장비 타입**: 지정된 값만 허용
- **담당자**: 존재하는 직원인지 확인

#### 형식 검증
- **이메일**: 정규식을 통한 이메일 형식 확인
- **날짜**: YYYY-MM-DD 형식 확인
- **숫자**: 메모리, 저장장치 용량 숫자 확인

#### 실시간 피드백
- **입력 중 검증**: onChange 이벤트로 즉시 확인
- **시각적 표시**: 빨간 테두리, 오류 메시지
- **제출 방지**: 오류 있으면 저장 버튼 비활성화

---

## 🎨 사용자 인터페이스

### 17. **현대적인 UI/UX 디자인**
#### 시각적 스타일
- **글래스모피즘**: 투명도와 백그라운드 블러 효과
- **그라디언트**: 보라색-파란색 계열 그라디언트 배경
- **둥근 모서리**: border-radius로 부드러운 느낌
- **그림자 효과**: box-shadow로 입체감 연출

#### 마이크로 인터랙션
- **호버 효과**: 요소에 마우스 올릴 때 변화
- **클릭 피드백**: 버튼 클릭 시 애니메이션
- **로딩 상태**: 스피너와 함께 상태 표시
- **부드러운 전환**: CSS transition으로 자연스러운 변화

### 18. **네비게이션 시스템**
#### 사이드바 메뉴
- **주요 기능**: 대시보드, 직원, 장비, QR 기능
- **아이콘**: 직관적인 SVG 아이콘 사용
- **활성 상태**: 현재 페이지 하이라이트
- **접기/펼치기**: 공간 효율성

#### 헤더
- **사용자 정보**: 로그인된 사용자 이메일 표시
- **로그아웃**: 안전한 세션 종료
- **반응형**: 모바일에서 햄버거 메뉴

#### 브레드크럼
- **경로 표시**: 현재 위치 명확히 표시
- **클릭 가능**: 상위 경로로 바로 이동
- **동적 생성**: 라우트에 따라 자동 생성

### 19. **상태 표시 시스템**
#### 로딩 상태
- **스피너**: 회전하는 로딩 애니메이션
- **스켈레톤**: 콘텐츠 로딩 중 자리표시자
- **진행률**: 파일 업로드 시 진행률 표시

#### 에러 처리
- **친화적 메시지**: 기술적 오류를 일반 언어로 번역
- **재시도 버튼**: 오류 발생 시 쉽게 재시도
- **컨텍스트 제공**: 무엇이 잘못되었는지 명확히 안내

#### 성공 피드백
- **즉시 피드백**: 작업 완료 시 즉시 확인
- **시각적 표시**: 녹색 체크마크 등
- **자동 숨김**: 일정 시간 후 자동으로 사라짐

### 20. **빈 상태 (Empty State)**
- **안내 메시지**: 데이터가 없을 때 명확한 안내
- **액션 버튼**: 첫 데이터 추가를 위한 버튼
- **일러스트레이션**: 시각적으로 이해하기 쉬운 아이콘
- **도움말**: 다음에 할 일 안내

---

## 🔧 고급 기능

### 21. **검색 및 필터링**
#### 실시간 검색
- **전체 텍스트 검색**: 모든 필드에서 키워드 검색
- **대소문자 무시**: 영문 대소문자 구분 없음
- **부분 일치**: 단어 일부만 입력해도 검색
- **즉시 반영**: 타이핑과 동시에 결과 업데이트

#### 다중 필터
- **조건 결합**: 여러 필터 동시 적용
- **독립적 동작**: 각 필터가 독립적으로 작동
- **필터 상태**: 현재 적용된 필터 시각적 표시
- **초기화**: 모든 필터 한번에 초기화

#### 클라이언트 사이드 처리
- **빠른 응답**: 서버 요청 없이 즉시 결과
- **네트워크 절약**: API 호출 최소화
- **오프라인 동작**: 이미 로드된 데이터는 오프라인에서도 검색

### 22. **성능 최적화**
#### 지연 로딩 (Lazy Loading)
- **필요 시점 로드**: 실제 사용할 때만 데이터 로드
- **코드 스플리팅**: 페이지별 번들 분리
- **이미지 지연 로딩**: 뷰포트에 들어올 때 이미지 로드

#### 캐싱 전략
- **localStorage**: 사용자 설정 및 선호도 저장
- **메모리 캐시**: 자주 사용하는 데이터 메모리 보관
- **브라우저 캐시**: 정적 리소스 캐싱

#### 최적화 기법
- **가상 스크롤**: 대량 데이터 렌더링 최적화
- **디바운싱**: 검색 입력 최적화
- **배치 처리**: 여러 API 요청 묶어서 처리

### 23. **보안 기능**
#### 인증 보안
- **JWT 토큰**: 안전한 토큰 기반 인증
- **토큰 만료**: 24시간 자동 만료
- **리프레시**: 자동 토큰 갱신 (구현 예정)
- **안전한 저장**: httpOnly 쿠키 (선택적)

#### 입력 검증
- **XSS 방지**: 사용자 입력 sanitization
- **SQL 인젝션 방지**: 파라미터화된 쿼리
- **CSRF 보호**: 토큰 기반 요청 검증
- **입력 길이 제한**: 각 필드별 최대 길이 제한

#### 네트워크 보안
- **HTTPS 강제**: 모든 통신 암호화
- **CORS 설정**: 허용된 도메인만 접근
- **헤더 보안**: 보안 관련 HTTP 헤더 설정
- **방화벽**: 서버 레벨 접근 제어

---

## 📱 모바일 최적화

### 24. **반응형 웹 디자인**
#### 브레이크포인트
- **1200px+**: 데스크톱 (큰 화면)
- **900px-1199px**: 태블릿 가로
- **768px-899px**: 태블릿 세로
- **480px-767px**: 스마트폰 가로
- **~479px**: 스마트폰 세로

#### 터치 최적화
- **터치 타겟**: 최소 44px 크기 보장
- **스와이프**: 좌우 스와이프 제스처 지원
- **확대/축소**: 핀치 줌 지원
- **길게 누르기**: 컨텍스트 메뉴

#### 적응형 레이아웃
- **유연한 그리드**: CSS Grid와 Flexbox 활용
- **가변 폰트**: clamp() 함수로 반응형 폰트 크기
- **적응형 간격**: 화면 크기에 따른 패딩/마진 조정
- **숨김/표시**: 화면 크기에 따른 요소 숨김

### 25. **모바일 UX**
#### 내비게이션
- **햄버거 메뉴**: 모바일에서 공간 절약
- **탭 바**: 하단 고정 주요 기능 바로가기
- **뒤로 가기**: 브라우저 뒤로가기 지원
- **제스처**: 스와이프로 페이지 이동

#### 입력 최적화
- **가상 키보드**: 입력 타입에 맞는 키보드
- **자동 완성**: 이전 입력값 제안
- **음성 입력**: 가능한 경우 음성 인식
- **카메라 연동**: QR 스캐너에서 카메라 접근

#### 성능 최적화
- **모바일 우선**: Mobile-first 디자인 접근
- **압축**: 이미지 및 리소스 압축
- **최소화**: 필수 기능만 우선 로드
- **오프라인**: 기본 기능 오프라인 지원

---

## 🚀 배포 및 운영

### 26. **배포 환경**
#### 서버 구성
- **웹 서버**: Nginx (리버스 프록시)
- **애플리케이션**: PM2로 프로세스 관리
- **데이터베이스**: Supabase (클라우드 PostgreSQL)
- **도메인**: invenone.it.kr

#### SSL 및 보안
- **SSL 인증서**: Let's Encrypt 자동 갱신
- **HTTPS 강제**: 모든 HTTP 요청 HTTPS로 리다이렉트
- **보안 헤더**: HSTS, CSP 등 설정
- **방화벽**: 필요한 포트만 개방

#### 모니터링
- **로그 관리**: PM2 로그 수집 및 관리
- **상태 체크**: Health check 엔드포인트
- **오류 추적**: 에러 로그 모니터링
- **성능 모니터링**: 응답 시간 및 리소스 사용량

### 27. **배포 자동화**
#### 배포 스크립트
- **통합 배포**: `deploy.sh` 전체 시스템 배포
- **진단 도구**: `diagnose.sh` 시스템 상태 진단
- **문제 해결**: 각종 오류 상황별 해결 스크립트

#### CI/CD (향후 계획)
- **자동 테스트**: 코드 변경 시 자동 테스트
- **자동 배포**: 테스트 통과 시 자동 배포
- **롤백**: 문제 발생 시 이전 버전으로 자동 복구
- **알림**: 배포 결과 슬랙/이메일 알림

---

## 🔮 향후 개발 계획

### 28. **단기 개발 계획**
#### 기능 개선
- **대량 QR 생성**: 여러 장비의 QR 코드 한번에 생성
- **QR 코드 인쇄**: PDF 형태로 인쇄용 QR 코드 생성
- **장비 이력 관리**: 수리, 업그레이드 이력 추적
- **알림 시스템**: 장비 교체 시기 알림

#### 사용자 경험 개선
- **다크 모드**: 어두운 테마 지원
- **다국어**: 영어 등 다국어 지원
- **키보드 단축키**: 파워 유저를 위한 키보드 단축키
- **접근성**: 스크린 리더 지원 개선

### 29. **중장기 개발 계획**
#### 고급 기능
- **재고 관리**: 창고 입출고 관리
- **구매 요청**: 장비 구매 신청 워크플로우
- **승인 시스템**: 다단계 승인 프로세스
- **보고서**: 다양한 형태의 리포트 생성

#### 시스템 확장
- **멀티 테넌트**: 여러 회사 동시 지원
- **API 공개**: 외부 시스템과 연동 API
- **모바일 앱**: 네이티브 모바일 애플리케이션
- **IoT 연동**: IoT 센서와 연동한 실시간 모니터링

---

## 📞 지원 및 문의

### 🛠 기술 지원
- **문서**: 상세한 사용자 가이드 및 API 문서
- **FAQ**: 자주 묻는 질문과 답변
- **이슈 트래킹**: GitHub Issues를 통한 버그 리포트
- **커뮤니티**: 사용자 커뮤니티 및 토론

### 📧 연락처
- **개발팀**: [개발팀 이메일]
- **기술 지원**: [지원팀 이메일]  
- **비즈니스 문의**: [비즈니스 이메일]

---

**QR 자산관리 시스템**은 기업의 IT 자산을 체계적으로 관리하고, QR 코드를 통한 빠른 접근을 제공하며, 직관적인 사용자 인터페이스로 효율적인 자산 관리 업무를 지원하는 현대적인 웹 애플리케이션입니다. 🚀

---

*문서 작성일: 2025년 1월 27일*  
*마지막 업데이트: 2025년 1월 27일*
